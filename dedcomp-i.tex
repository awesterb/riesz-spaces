\documentclass[main.tex]{subfiles}
\begin{document}
% 6
\section{Dedekind Completeness, I}
\begin{psec}{6.1}%
Let $X$ be a compact Hausdorff space
such that $\Cont{X}$ is Dedekind complete,
and let~$U$ be an open subset of~$X$.
\begin{enumerate}
\item\label{6.1-1}
The set
\begin{equation*}
F\ :=\ \bigl\{ f\in \Cont{X}\colon f\leq\mathbb{1}_U \bigr\}
\end{equation*}
is bounded from above by~$\mathbb{1}$,
hence has a supremum~$f_0$ in~$\Cont{X}$.
For every $a\in U$,
by Urysohn's Lemma
there is a continuous $f\colon X\ra [0,1]$
with $f(a)=1$, $f=0$ on~$X\backslash U$.
Then $f\in F$, so that $f\leq f_0$.
As, of course, $f_0\leq \mathbb{1}$
we find that $f_0=1$ on~$U$,
and, by continuity
\begin{equation*}
f_0=1\ \htam{ on }\ \overline{U}\htam{.}
\end{equation*}
%
\item\label{6.1-2}
Similarly, the set
\begin{equation*}
G\ :=\ \bigl\{g\in\Cont{X}\colon
 g\leq \mathbb{1}_{X\backslash\overline{U}} \bigr\}
\end{equation*}
has a supremum, $g_0$, in~$\Cont{X}$, with
\begin{equation*}
g_0=1\ \htam{ on }\ X\backslash\overline{U}\htam{.}
\end{equation*}
(Of course, $g_0=1$ on the closure of~$X\backslash \overline U$,
but we have no use for that.)
%
\item\label{6.1-3}
But:
If $f\in F$ and $g\in G$,
then $f+g\leq \mathbb{1}$.
Hence,
if $f\in F$,
then $\mathbb 1-f$ is an upper bound for~$G$,
whence $g_0\leq\mathbb 1-f$.

This, in turn,
implies that $\mathbb 1-g_0$ is an upper bound for~$F$, and
\begin{equation*}
f_0\ \leq\ \mathbb 1-g_0\htam{.}
\end{equation*}
%
\item\label{6.1-4}
Combining these results
(and noting that $f_0\geq 0$)
we see that~$f_0$ must be~${\mathbb 1}_{\overline U}$.
In particular,
$\mathbb{1}_{\overline U}$ must be continuous:
$\overline U$ is clopen.
\end{enumerate}
\end{psec}
%
%                  6.2
%
\begin{psec}{6.2}{Definition}
A compact Hausdorff space is
\keyword{extremally disconnected}
if the closure of every open set is clopen.

Extremally disconnected (compact Hausdorff) spaces are
zerodimensional;
the converse is very false.
(See exercise~\ref{6.3}.)

The Stone--\v{C}ech compactification of~$\N$
is extremally disconnected
since $\Cont{\beta\N}$ is Riesz isomorphic to~$\ell^\infty$.
(Closed subspaces of extremally disconnected spaces
may fail to be extremally disconnected.)
\end{psec}
%
%                  6.3
%
\begin{psec}{6.3}{Exercise}
\begin{enumerate}
\item\label{6.3-1}
Show that every extremally disconnected
compact Hausdorff space is zerodimensional. (See~\ref{3.17}.)
%
\item\label{6.3-2}
Let $X$ be the compact space
$\{0\}\cup\{1,\,\sfrac{1}{2},\,\sfrac{1}{3},\,\dotsc\}$.
Show that~$X$ is zerodimensional
but not extremally disconnected.
(Any relation with~\ref{4.20}\ref{4.20-1}?)
\end{enumerate}
\end{psec}
%
%                  6.4
%
\begin{psec}{6.4}{Exercise}
Let $X$ be a compact Hausdorff space.
\begin{enumerate}
\item\label{6.4-1}
Show: the following property of~$X$
is equivalent to extremal disconnectedness:
\begin{center}
\begin{minipage}{.45\textwidth}
If two open subsets of~$X$
are disjoint,
then so are their closures.
\end{minipage}
\end{center}
\vspace{.5em}
%
\item\label{6.4-2}
Assume that $X$ is, in fact, extremally disconnected.
Let $a\in X$ be so that the singleton set $\{a\}$ is not open;
then $X\backslash\{a\}$ is completely regular, not compact.
Show that, nevertheless,
all the continuous functions on $X\backslash\{a\}$ are bounded.
(A guideline:
Suppose $f\in\Cont{X\backslash\{a\}}^+$ is unbounded.
There exist $a_1,\,a_2,\,\dotsc$ in~$X\backslash\{a\}$
such that $f(a_{n+1})>1+f(a_n)$ for every~$n$.
There are disjoint open subsets $U,V$ of~$X\backslash\{a\}$
with $a_1,a_3,a_5,\dotsc\in U$
and $a_2,a_4,a_6,\dotsc\in V$.)
%
\item\label{6.4-3}
Again, assume that~$X$ is extremally disconnected
and that~$a$ is a non-isolated point of~$X$.
Let $f\in\Cont{X}$, $f(a)=0$.
Prove that~$f$ must take the value~$0$ at some point of~$X$,
different from~$a$.
%
\item\label{6.4-4}
Prove:
If~$X$ is extremally disconnected
and metrizable,
then~$X$ is finite.
\end{enumerate}
\end{psec}
%
%                  6.5
%
\begin{psec}{6.5}{Theorem}\statement{
Let~$X$ be a compact Hausdorff space.
Then $\Cont{X}$ is Dedekind complete
if and only if~$X$ is extremally disconnected.
}\end{psec}
\begin{proof}
The ``only if'' we have seen in~\ref{6.1}.
Now let~$X$ be extremally disconnected.
Let~$F$ be a nonempty subset of~$\Cont{X}^+$
that is bounded from above;
we show that it has a supremum.
Choose an upper bound~$f_0$ for~$F$.
(The following construction depends on the existence
of the upper bound, not on its values.)

Define $g\colon X\ra [0,\infty)$ by
\begin{equation*}
g(x)\ :=\ \sup_{f\in F} f(x)\qquad(x\in X)\htam{.}
\end{equation*}
For each~$s$ in~$[0,\infty)$
the set $\{x\colon g(x)\geq s\}$ is open, since
\begin{equation*}
\{x\colon g(x)>s\}\ =\ \bigcup_{f\in F} \{x\colon f(x)>s\}\htam{;}
\end{equation*}
let~$U_s$ be its closure.

This gives us a family $(U_s)_{s>0}$ of clopen sets, with
\begin{equation*}
s<t\quad\implies\quad U_s \supseteq U_t\htam{.}
\end{equation*}

For each~$s$ we have $f_0 > s$ on $\{x\colon g(x)>s\}$,
so that $f_0\geq s\,\mathbb{1}_{U_s}$
as~$f_0$ is continuous.
Thus, we can define $f_\infty\colon X\ra \R$ by
\begin{equation*}
f_\infty(x)\ 
:=\ \smash{\sup_{s\geq 0}}\, s\mathbb{1}_{U_s}(x)\ 
=\ \sup\{s\colon x\in U_s\}
\qquad(x\in X)\htam{.}
\end{equation*}
Then $g\leq f_\infty\leq f_0$ for any upper bound~$f_0$ of~$F$.
Therefore, $f_\infty$ will be the supremum of~$F$ in~$\Cont{X}$
if and only if it is continuous.
But the continuity of~$f_\infty$ follows from the formulas
\begin{align*}
\{ x\colon f_\infty(x)>t\}\ &=\ \bigcup_{s>t} U_s\htam{,}\\
\{ x\colon f_\infty(x)<t\}\ &=\ \bigcup_{s<t} X\backslash U_s\htam{.}
\end{align*}
The proof of the first formula is straightforward,
the proof of the second hinges on the implications
$f_\infty(x)<s\implies x\notin U_s \implies f_\infty(x)\leq s$. \xqed
\end{proof}
%
%                  6.6
%
\begin{psec}{6.6}{Exercise}
Let $X$ be a compact Hausdorff space.
Prove the equivalence of:
\begin{enumerate}[label=(\greek{*})]
\item\label{6.6-alpha}
$\Cont{X}$ is $\sigma$-Dedekind compltee.
%
\item\label{6.6-beta}
For every~$f$ in~$\Cont{X}^+$ the open set $\{x\colon f(x)>0\}$
has open closure.
%
\item\label{6.6-gamma}
If $f_1,f_2,\dotsc\in\Cont{X}^+$,
then $\bigcup\smash{\bigl\{x\colon f_n(x)>0\bigr\}}$ has open closure.
\end{enumerate}

(\ref{6.6-gamma} follows from~\ref{6.6-beta},
e.g., via $f:=\sum f_n\wedge 2^{-n} \, \mathbb{1}$.\ )
\end{psec}
\begin{psec*}{Comment}
Property \ref{6.6-beta} 
is known as ``basic disconnectedness''.
It implies zerodimensionality.
\end{psec*}
%
%                  6.7
%
\begin{psec}{6.7}%
Let $X$ be a set, $\mathcal A$ an algebra of subsets of~$X$.
(See~\ref{1.1}\ref{1.1-4} for a definition.)
\begin{enumerate}
\item\label{6.7-1}
An $\mathcal A$-\keyword{step function}
is a function on~$X$,
representable as
\begin{equation*}
\sum_{n=1}^N \,\alpha_n \mathbb{1}_{A_n}
\end{equation*}
where $N\in\N$, $\alpha_1,\dotsc,\alpha_N\in\R$,
and $A_1,\dotsc,A_N$
are pairwise disjoint elements of~$\mathcal A$.
The $\mathcal A$-step functions form a Riesz space~$\lbb \mathcal A \rbb$
(\ref{1.5}\ref{1.5-7}).
%
\item\label{6.7-2}
We define
\begin{equation*}
\BLeb(\mathcal{A})
\end{equation*}
to be the closure of~$\lbb\mathcal A\rbb$ in~$\ell^\infty(X)$
(see~\ref{1.5}\ref{1.5-2}) relative to~$\|\cdot\|_\infty$.
A function $f\colon X\ra\R$ lies in~$\BLeb(\mathcal A)$
if and only if for every $\varepsilon>0$
there is an $\mathcal A$-step function~$h$
with $\|f-h\|_\infty\leq\varepsilon$.
This~$\BLeb(\mathcal A)$ is a Riesz subspace of~$\ell^\infty(X)$.
It has a unit, e.g., the function~$\mathbb{1}$.

(If~$\mathcal A$ is a $\sigma$-algebra,
$\BLeb(\mathcal A)$ is the space of
all bounded $\mathcal A$-measurable functions.)
\end{enumerate}
\end{psec}
%
%                  6.8
%
\begin{psec}{6.8}{Exercise}
\begin{enumerate}
\item\label{6.8-1}
Show that $\ell^\infty(X)$ is an $\BLeb(\mathcal A)$.
%
\item\label{6.8-2}
Prove:
If~$X$ is a zerodimensional compact Hausdorff space,
then
\begin{equation*}
\Cont{X}=\BLeb(\clopen(X))\htam{.}
\end{equation*}
\end{enumerate}
\end{psec}
%
%                  6.9
%
\begin{psec}{6.9}{Exercise}
Let $\mathcal A$ be an algebra of subsets of~$X$.
As a closed Riesz subspace of~$\ell^\infty(X)$
that contains~$\mathbb 1$, \ 
$\BLeb(\mathcal A)$ is Archimedean, unitary and uniformly complete,
hence Riesz isomorphic to some~$\Cont{\Phi}$,
according to Yosida.

Prove that~$\Phi$ is a Stone space for~$\mathcal A$~(\ref{3.19}).
\end{psec}
%
%                  6.10
%
\begin{psec}{6.10}{Theorem}\statement{
Let $\mathcal A$ be an algebra of subsets of a set~$X$
and let~$\mu$ be an additive function $\mathcal A\ra [0,\infty)$.
Then there is a unique linear function
\begin{equation*}
f\ \mapsto\ \int f\,\mathrm d\mu
\end{equation*}
on $\BLeb(\mathcal A)$ with the properties
\begin{equation*}
\left\{\quad
\begin{aligned}
\int \mathbb{1}_{A}\,\mathrm d\mu\ &=\ \mu(A)\qquad 
  &(A\in\mathcal A)\htam{,} \\
\int f\,\mathrm{d}\mu\ &\geq\ 0\qquad
  &(f\geq 0)\htam{.}
\end{aligned}
\right.
\end{equation*}
}\end{psec}
\begin{proof}
(inspired by the proof of~\ref{3.18}.)
\begin{enumerate}[label=(\Roman*)]
\item\label{6.10-I}
A ``partition'' here is a finite set of pairwise disjoint 
nonempty elements of~$\mathcal A$
whose union is~$X$.
A ``refinement'' of a partition is what you think it is.
For a partition~$S$ we denote by~$\lbb S\rbb$
the vector space of all functions $X\ra \R$
that are constant on each element of~$S$.
If~$T$ is a refinement of~$S$,
then $\lbb S \rbb \subseteq \lbb T \rbb$.
The union of all spaces~$\lbb S \rbb$ is precisely~$\lbb \mathcal A \rbb$,
the set of all $\mathcal{A}$-step~functions.

For $f\in\lbb S \rbb$ we define
\begin{equation*}
\int_S f\,\mathrm{d}\mu\ =\ \sum_{s\in S} \alpha_s\,\mu(s)
\quad\htam{ where }\quad f=\sum_{s\in S} \alpha_s \mathbb{1}_s\htam{.}
\end{equation*}
Then $\int_S \cdot\,\mathrm{d}\mu$ is a linear function $\lbb S \rbb \ra \R$.

Is $S$ a partition and~$T$ is a refinement of~$S$, then
\begin{alignat*}{2}
\int_T f\,\mathrm{d}\mu\ &=\ \int_S 
f\,\mathrm{d}\mu\qquad&(f\in \lbb S \rbb)\htam{.} \\
\intertext{(Here we use the additivity of~$\mu$.)
It follows that we can define a linear function $\int\cdot\,\mathrm d\mu$
on~$\lbb \mathcal A \rbb$ by}
\int f\,\mathrm{d}\mu\ &:=\ \int_S f\mathrm{d}\mu
 \qquad &(f\in\lbb S \rbb)\htam{.}
\end{alignat*}
Observe that $\int \mathbb{1}_A\,\mathrm{d}\mu=\mu(A)
\quad(A\in\lbb \mathcal A \rbb)$,
and also that $\int f\,\mathrm{d}\mu\geq 0$
if $f\in\lbb\mathcal{A}\rbb^+$.
%
\item\label{6.10-II}
It follows that $\int\cdot\,\mathrm{d}\mu$ is increasing, so that
\begin{equation*}
\Bigl|\int f\,\mathrm{d}\mu\  -\int g\,\mathrm{d}\mu\  \Bigr|
\ \leq\ \int \bigl|f-g\bigr|\,\mathrm{d}\mu
\ \leq\ \|f-g\|_\infty \,\mu(X)\qquad(f,g\in\lbb \mathcal A \rbb)
\htam{,}
\end{equation*}
because $\pm(f-g)\leq|f-g|\leq\|f-g\|_\infty\,\mathbb{1}$.

Viewing $\BLeb(\mathcal A)$ as a metric space
under the metric derived from $\|\cdot\|_\infty$,
we see that~$\lbb\mathcal{A}\rbb$ is a dense subset
on which $\int\cdot\,\mathrm d\mu$ is a uniformly continuous function.
By the completeness of~$\R$,
this function extends uniquely to a continuous function
$\BLeb(\mathcal A)\ra \R$,
which we again denote by $\int\cdot\,\mathrm{d}\mu$.

Every element of $\BLeb(\mathcal A)$ being the $\|\cdot\|_\infty$-limit
of a sequence in~$\lbb\mathcal A\rbb$
one easily proves that $\int\cdot\,\mathrm d\mu$ is linear
and increasing on $\BLeb(\mathcal A)$.
%
\item\label{6.10-III}
The uniqueness is now clear. \xqed
\end{enumerate}
\end{proof}
%
%                  6.11
%
\begin{psec}{6.11}{Comments}
Farther on,
we will use some elementary properties of this intergral
without explicitly mentioning them.
This concerns in particular the following observations:
\begin{alignat}{2}
\label{eq6.11-1}f\leq g\quad\implies\quad 
 &\int f\,\mathrm d\mu \ \leq\ \int g\,\mathrm d\mu\htam{,} \\
\label{eq6.11-2}\Bigl| \int f\,\mathrm d\mu\ \Bigr|\ \quad\leq\ \quad
 &\int\bigl|f\bigr|\,\mathrm d\mu\htam{;}\\
\label{eq6.11-3}\Bigl| \int f\,\mathrm d\mu\ \Bigr|\ \quad\leq\ \quad
&\|f\|_\infty\, \mu(X)\htam{.}
\end{alignat}
Here~\eqref{eq6.11-2} is a consequence of~\eqref{eq6.11-1}
and the inequalities $-|f|\leq f\leq |f|$.
\end{psec}
%
%                  6.12
%
\begin{psec}{6.12}{Exercise}
Let $\mathcal A$ be an algebra of subsets of~$X$.
We are going to investigate the linear functions $\BLeb(\mathcal A)\ra \R$
that are continuous relative to 
the norm~$\|\cdot\|_\infty$ on $\BLeb(\mathcal A)$.
In the language of~\ref{5.1}\ref{5.1-2},
these linear functions form a vector space
$\Lin(\BLeb(\mathcal{A}),\R)$,
endowed with a norm~$\|\cdot\|$,
described by
\begin{equation*}
\|\varphi\|\ =\ \inf\bigl\{
c\in[0,\infty)\colon |\varphi(f)|\leq c\,\|f\|_\infty
\htam{ for all }f\htam{ in }\BLeb(\mathcal A)\bigr\}\htam{.}
\end{equation*}

In \ref{1.12} we have met the Riesz space $\BA(\mathcal A)$
of bounded additive functions on~$\mathcal A$.
\begin{enumerate}
\item\label{6.12-1}
Prove that for every~$\mu$ in $\BA(\mathcal A)$
there is one linear function
$\varphi_\mu\colon \BLeb(\mathcal A)\ra \R$
for which
\begin{equation*}
\left\{
\ 
\begin{aligned}
&\varphi_\mu(\mathbb{1}_A)\ =\ \mu(A)\qquad (A\in\mathcal A)\htam{,} \\
&\varphi_\mu\htam{ is continuous.}
\end{aligned}
\right.
\end{equation*}
(The existence is easy: $\mu=\mu^+-\mu^-$.)

Prove also:
\begin{equation*}
\|\varphi\|\ \leq\ \Var{}{\mu}\htam{.}
\end{equation*}
(See~\ref{1.8} for ``$\Var{}{}$''.)
%
\item\label{6.12-2}
Conversely,
let $\varphi\colon\BLeb(\mathcal A)\ra\R$ be linear and continuous.
Show that there exists one~$\mu$ in~$\BA(\mathcal A)$
with $\varphi=\varphi_\mu$,
and that $\Var{}{\mu}\leq\|\varphi\|$.
\end{enumerate}
\end{psec}
%
%                  6.13
%
\begin{psec}{6.13}%
Now assume that~$\mathcal A$ actually is a $\sigma$-algebra.
(For the moment,
no~$\mu$ is given:
we investigate~$\BLeb(\mathcal A)$.)
\begin{enumerate}
\item\label{6.13-1}
Let $f\in \BLeb(\mathcal A)$ and $s\in\R$.
Then the set $\{x\colon f(x)>s\}$ lies in~$\mathcal A$.
Proof:\ 
For each~$n$ there is an $\mathcal A$-step function~$f_n$
with $f-n^{-1}\mathbb{1}\leq f_n\leq f$.
Then
\begin{equation*}
\bigl\{ x\colon f(x)>s\bigr\}\ =\ 
\,{\bigcup}_n \bigl\{x\colon f_n(x)>s\bigr\}\htam{.}
\end{equation*}
Thus, $\{ x\colon f(x)>s\}$ is
a union of countably many elements of~$\mathcal A$.
%
\item\label{6.13-2}
Conversely,
let~$f$ be a bounded function on~$X$
such that $\{x\colon f(x)>s\}\in\mathcal A$
for every $s\in\R$.
Let $\varepsilon>0$;
we make an $\mathcal A$-step function~$h$ with 
$\|f-h\|_\infty \leq\varepsilon$.

Choose $s_0<s_1<\dotsb<s_N$ in~$\R$
so that all values of~$f$ lie in the interval $(s_0,s_N)$,
whereas $s_n<s_{n-1}+\varepsilon\quad(n=1,\dotsc,N)$.
Set
\begin{equation*}
A_n\ :=\ \bigl\{x\colon f(x)>s_n\bigr\}\,\backslash\,
  \bigl\{x\colon f(x)>s_{n-1}\bigr\}
\qquad (n=1,\dotsc,N)
\end{equation*}
and take
\begin{equation*}
h\ =\ \sum_{n=1}^N\,s_n\,\mathbb{1}_{A_n}\htam{.}
\end{equation*}
\end{enumerate}
\end{psec}
%
%                  6.14
%
\begin{psec}{6.14}{Theorem}\statement{
Let $\mathcal A$ be a $\sigma$-algebra in a set~$X$.
Then $\BLeb(\mathcal A)$ is $\sigma$-Dedekind complete.
More than that:
If $\{f_1,f_2,\dotsc\}$ is a countable subset of~$\BLeb(\mathcal A)$,
bounded from above,
then the function
\begin{equation*}
f\colon x\mapsto \sup_n f_n(x)\qquad(x\in X)
\end{equation*}
is the supremum of $\{f_1,f_2,\dotsc\}$ in the
Riesz space~$\BLeb(\mathcal A)$.
}\end{psec}
\begin{proof}
For every $s$ in~$\R$ we have
\begin{equation*}
\bigl\{x\colon f(x)>s\bigr\}\ =\ 
  {\bigcup}_n\bigl\{x\colon f_n(x)>s\bigr\}\in\mathcal{A}\htam{.}
\end{equation*}
It follows from~\ref{6.13} that
$f\in\BLeb(\mathcal A)$.
The rest is obvious. \xqed
\end{proof}
%
%                  6.15
%
\noindent As a by-product we get:
\begin{psec}{6.15}{Corollary}\statement{
Let $\mathcal A$ be a $\sigma$-algebra in a set~$X$.
Let~$f$ be a bounded function on~$X$
that is pointwise limit of a sequence in~$\BLeb(\mathcal A)$.
Then~$f\in\BLeb(\mathcal A)$.}
(For uniform limits this conclusion is basically trivial,
for pointwise limits not at all.)
\end{psec}
\begin{proof}
Choose a number~$c$ such that $|f|\leq c\,\mathbb{1}$.
Choose a sequence~$(f_n)_n$ in~$\BLeb(\mathcal A)$
that tends to~$f$ pointwise.
For $x\in X$ and $n\in \N$,
set 
\begin{equation*}
g_n(x)\ :=\ \cramped{\sup_{m\geq n}} \ f_m(x)\wedge c\qquad(x\in X)\htam{.}
\end{equation*}
By the theorem,
every~$g_n$ lies in~$\BLeb(\mathcal A)$.
We have $g_n(x)\downarrow f(x)\geq -c$
for each~$x$,
so $f\in\BLeb(\mathcal A)$,
again by the theorem. \xqed
\end{proof}
%
%                  6.16
%
\begin{psec}{6.16}%
Again,
let $\mathcal A$ be a $\sigma$-algebra in a set~$X$.
Let~$\mu$ be a \keyword{finite measure} on~$\mathcal A$,
i.e., a signed measure (see~\ref{1.13})
with values in~$[0,\infty)$.
$\mu$ is finitely additive,
so~\ref{6.10} and~\ref{6.11} are applicable.
\begin{enumerate}
\item\label{6.16-1}
Call a subset~$A$ of~$X$ \keyword{null} (or: $\mu$-\emph{null})
if~$A\in\mathcal A$ and $\mu(A)=0$.
A function~$f$ in~$\BLeb(\mathcal A)$ is \keyword{null}
if $\int|f|\,\mathrm{d}\mu =0$.
Observe that 
\begin{equation*}
A\htam{ is null}\quad\iff\quad\mathbb{1}_A\htam{ is null.}
\end{equation*}
%
\item\label{6.16-2}\statement{
If $A$ is a null set
and~$B$ is a subset of~$A$
that lies in the $\sigma$-algebra~$\mathcal A$,
then~$B$ is null.}
Slightly less obvious:
\statement{Every union of countably many null sets is null.}
For a proof,
let $A_1,A_2,\dotsc$ be null sets;
define $B_1:=A_1$, 
$B_n:=A_n\backslash \bigcup_{i<n} A_i \quad (n\in\N)$; then we have
\begin{equation*}
\textstyle \mu(\bigcup A_n)\ 
=\ \mu(\bigcup B_n)\ 
=\ \sum \mu(B_n)\ 
\leq\ \sum \mu(A_n)\ =\ 0\htam{.}
\end{equation*}
%
\item\label{6.16-3}
Let $f\in\BLeb(\mathcal A)$.
Claim:\statement{
\begin{equation*}
\textstyle f\htam{ is null} \quad\iff\quad 
   \bigl\{x\colon f(x)\neq 0\bigr\}\htam{ is null.}
\end{equation*}
}Proof:
Put $A:=\{x\colon f(x)\neq 0\}$.
Note that $A\in\mathcal{A}$ because $A=\{x\colon |f(x)|>0\}$
and because of~\ref{6.13}.

Let~$A$ be null.
We have $|f|\leq\|f\|_\infty\,\mathbb{1}_A$,
whence $\int |f|\,\mathrm{d}\mu \leq \|f\|_\infty\,\mu(A)$,
and~$f$ is~null.

Conversely,
suppose~$f$ is null. 
For $n\in\N$, put
 $A_m:=\smash{\bigl\{x\colon |f(x)|>n^{-1}\bigr\}}$.
Then $A_n\in\mathcal A$ and $\mathbb{1}_{A_n}\leq n|f|$ for all~$n$,
implying
$\mu(A_n) 
= \int \mathbb{1}_{A_n}\,\mathrm{d}\mu
\leq n\int|f|\mathrm{d}\mu =0$.
Thus every~$A_n$ is null.
Then so is their union,
which is~$A$.
%
\item\label{6.16-4}
The set of all null functions
is a Riesz ideal in~$\BLeb(\mathcal A)$.
It is uniformly closed,
because,
if $f_n\ra f$ uniformly (or even pointwise),
then 
\begin{equation*}
\textstyle \{x\colon |f(x)|\neq 0\} 
\ \subseteq\  \bigcup_n \{ x\colon f_n(x)\neq 0\}\htam{.}
\end{equation*}

We denote the quotient space by
\begin{equation*}
\BNL(\mu)\htam{,}
\end{equation*}
and the quotient map $\BLeb(\mathcal A)\ra\BNL(\mu)$ by
\begin{equation*}
f\mapsto [f]_\mu\htam{.}
\end{equation*}
\end{enumerate}
\end{psec}
%
%                  6.17
%
\begin{psec}{6.17}{Exercise}
(Situation of~\ref{6.16})
Let $f,g\in\BLeb(\mathcal A)$.
Prove:
\begin{equation*}
[f]_\mu\ \leq\ [g]_\mu\quad\iff\quad
\bigl\{x\colon f(x)>g(x)\bigr\}\ \htam{ is null.}
\end{equation*}
\end{psec}
%
%                  6.18
%
\begin{psec}{6.18}{Exercise}
\begin{enumerate}
\item\label{6.18-1}
The space 
$D:=\smash{\bigl\{f\in\Cont{[0,1]}\colon f(0)=0\bigr\}}$
is a uniformly closed Riesz ideal in $E:=\Cont{[0,1]}$.
Form the quotient space $E/D$
and the quotient Riesz homomorphism $Q\colon E\ra E/D$.
Let $F \subseteq E$ be the set $\{f_1, f_2, \dotsc\}$
where
\begin{equation*}
f_n(t)\ =\ \sqrt[n]{t}\qquad(n\in\N,\ t\in[0,1])\htam{.}
\end{equation*}
Show that~$F$ has a supremum in~$E$
and that $Q(F)$ has a supremum in~$E/D$,
but that $Q(\sup F)$ is not $\sup Q(F)$.
%
\item\label{6.18-2}
(However:)
In the situation of~\ref{6.16},
let $g,\,f_1,f_2,\dotsc\in\BLeb(\mathcal A)$,
so that~$g$
is the supremum of $\{f_n\colon n\in\N\}$ in~$\BLeb(\mathcal A)$.
Show that~$[g]_\mu$
is the supremum of 
$\smash{\bigl\{[f_n]_\mu\colon n\in\N\bigr\}}$ in~$\BNL(\mu)$.
\end{enumerate}
\end{psec}
%
%                  6.19
%
\begin{psec}{6.19}{Theorem}\statement{
Let $\mu$ be a finite measure on a $\sigma$-algebra~$\mathcal A$
in a set~$X$.
Then~$\BNL(\mu)$ is Dedekind complete.
Furthermore,
if~$F$ is a set in~$\BNL(\mu)$
that has a supremum,
then~$F$ has a countable subset with the same supremum.
}\end{psec}
\begin{proof}
Let $F$ be a nonempty subset of $\BNL(\mu)$,
upwards directed (\ref{4.17}\ref{4.17-2}), and
with an upper bound $[g]_\mu$.
Define
\begin{equation*}
\mathcal{F}\ :=\ \bigl\{ f\in\BLeb(\mathcal{A})\colon
  [f]_\mu\in F\htam{, }\ f\leq g\bigr\}\htam{.}
\end{equation*}
Then $F=\smash{\bigl\{[f]_\mu\colon f\in\mathcal F\bigr\}}$.
(If $f\in\BLeb(\mathcal A)$ and $[f]_\mu\in F$,
then $[f]_\mu = [f\wedge g]_\mu$,
and $f\wedge g\in\mathcal F$.)
As~$F$ is upwards directed, so is~$\mathcal F$.

Let $s:=\sup\smash{\bigl\{\int f\,\mathrm{d}\mu\colon
f\in\mathcal F\bigr\}}$ and choose $f_1,f_2,\dotsc$ in~$\mathcal F$
with $\int f_n\,\mathrm{d}\mu\ra s$.
We can define a function~$f_\infty$ on~$X$ by
\begin{equation*}
f_\infty(x)\ :=\ \textstyle \sup_n f_n(x)\qquad(x\in X)\htam{.}
\end{equation*}
By~\ref{6.14} we have~$f_\infty\in\BLeb(\mathcal A)$,
so that (with Exercise~\ref{6.18}\ref{6.18-2})
\begin{equation*}
[f_\infty]_\mu\ =\ \sup\,\bigl\{[f_n]_\mu\colon n\in\N\bigr\}
\qquad\htam{ in }\BNL(\mu)\htam{.}
\end{equation*}

Therefore,
we are done if $[f_\infty]_\mu$
is an upper bound for~$F$,
which will be true if $[f_\infty]_\mu\geq [f]_\mu$
for all~$f$ in~$\mathcal F$.

Let $f\in\mathcal F$.
For every~$n$,
\begin{alignat*}{2}
\int |f-f\wedge f_\infty |\,\mathrm{d}\mu
\ &=\ \int (f-f\wedge f_\infty)\,\mathrm{d}\mu  \\
\ &\leq\ \int(f-f\wedge f_n)\,\mathrm{d}\mu \\
\ &=\ \int(f\vee f_n -f_n)\,\mathrm{d}\mu \\
\ &=\ \int(f\vee f_n)\,\mathrm{d}\mu 
      -\int f_n\,\mathrm{d}\mu
\ \leq\ s-\int f_n\,\mathrm{d}\mu\htam{,}
\end{alignat*}
where $\int f(f\vee f_n)\,\mathrm{d}\mu\leq s$
thanks to the directedness of~$\mathcal F$.
Consequently,
$f-f\wedge f_\infty$ is null,
and $[f]_\mu= [f\wedge f_\infty]_\mu\leq [f_\infty]_\mu$. \xqed
\end{proof}
%
%                  6.20
%
\begin{psec}{6.20}%
(Situation as above)
\begin{enumerate}
\item\label{6.20-1}
Yosida's Theorem (see Theorem~\ref{6.5})
produces an extremally disconnected compact Hausdorff space~$Y$
and a Riesz \emph{iso}morphism
of $\BNL(\mu)$ onto~$\Cont{Y}$.
It will be convenient for us
to compose this map with the quotient map
$\BLeb(\mathcal A)\ra \BNL(\mu)$,
obtaining a surjective Riesz homomorphism
$\BLeb(\mathcal A)\ra\Cont{Y}$,
denoted
\begin{equation*}
f\mapsto \hat{f}\qquad(f\in\BLeb(\mathcal A))
\end{equation*}
such that
\begin{alignat*}{2}
\hat{\mathbb{1}}_X\ &=\ \mathbb{1}_Y\htam{,} \\
\hat f \ &=\ \hat g\quad&
&\iff\quad \bigl\{x\colon f(x)\neq g(x)\bigr\}\htam{ is }\mu\htam{-null} \\
&&&\iff\quad \int |f-g|\,\mathrm{d}\mu = 0\htam{.}
\end{alignat*}
It follows from~\ref{5.27}
that this map is multiplicative.
The identity $\hat{\mathbb{1}}_X=\mathbb{1}_Y$ implies
\begin{equation*}
\|\hat{f}\|_\infty\ \leq\ \|f\|_\infty\qquad (f\in\BLeb(\mathcal A))\htam{.}
\end{equation*}
%
\item\label{6.20-2}
If $A\in\mathcal A$
(this we have done before),
then $\mathbb{1}_A \perp \mathbb{1}_X -\mathbb{1}_A$,
whence $\hat{\mathbb{1}}_A \perp \mathbb{1}_Y - \hat{\mathbb{1}}_A$,
and $\hat{\mathbb{1}}_A$ is an indicator function.
Thus,
with every $A\in\mathcal A$
we can associate an $\hat{A}\in\clopen(Y)$ by
\begin{equation*}
\hat{\mathbb 1}_A\ =\ \mathbb{1}_{\hat A}\htam{.}
\end{equation*}
The resulting map $A\mapsto \hat{A}$ is a lattice homomorphism.

It maps~$\mathcal A$ \emph{onto} $\clopen(Y)$.
Proof:
Take~$U$ in $\clopen(Y)$.
There is an~$f$ in~$\BLeb(\mathcal A)$
with $\hat f=\mathbb{1}_U$.
Then $\smash{\widehat{f^2}}=\mathbb{1}_U^2=\mathbb{1}_U=\hat f$,
so $\{x\in X\colon f(x)\neq f^2(x)\}$ is $\mu$-null.
Setting $A:=\{x\colon f(x)>0\}$
we have $A\in\mathcal A$ by~\ref{6.13}\ref{6.13-1},
and $\mathbb{1}_U = \hat f = \hat{\mathbb{1}}_A$
because $\{x\colon f(x)\neq \mathbb{1}_A(x)\}$
is precisely $\{x\colon f(x)\neq f^2(x)\}$.
%
\item\label{6.20-3}
The map $A\mapsto \hat A$ is generally not injective:
$\hat A=\varnothing$ if and only if~$A$ is $\mu$-null.

If $A,B\in \mathcal A$ and $\hat A=\hat B$,
then $\{x\colon \mathbb{1}_A(x)\neq\mathbb{1}_B(x)\}$
is a $\mu$-null set.
But this set is $(A\backslash B)\cup(B\backslash A)$,
so
\begin{equation*}
\mu(A\backslash B)\ =\ \mu(B\backslash A)\ =\ 0\htam{,}
\end{equation*}
whence
\begin{equation*}
\mu(A)\ =\ \mu(A\backslash B) + \mu(A\cap B)
\ =\ \mu(B\backslash A) + \mu(A\cap B)
\ =\ \mu(B)\htam{.}
\end{equation*}

It follows that we can define
$\overline \mu\colon \clopen(Y)\ra \R$ by
\begin{equation*}
\overline{\mu} (\hat A)\ :=\ \mu(A)\qquad (A\in\mathcal A)\htam{.}
\end{equation*}
$\overline \mu$ is additive.
\begin{equation*}
\xymatrix@!C{
&
 \R & 
\\
\BLeb(\mathcal{A})
  \ar[ru]^{\int\cdot\,\mathrm{d}\mu}
  \ar@/_1em/@{->>}[rr]_{f\mapsto \hat f}
  \ar@{->>}[r]^{f\mapsto [f]_\mu}&
\BNL(\mu) 
  \ar@3{-}[r]&
\lsub{\BLeb(\clopen(Y))=\Cont{Y}}{\BLeb(\clopen(Y))}
  \ar[lu]_{\int\cdot\,\mathrm{d}\overline\mu}\\
\mathcal{A}
  \ar@{->>}[rr]_{A\mapsto\hat A}
  \ar[rd]_\mu
  \ar[u]^{A\mapsto\mathbb{1}_A}&
&
\clopen(Y)
  \ar[ld]^{\overline\mu}
  \ar[u]_{U\mapsto\mathbb{1}_U}\\
&
\R&
}
\end{equation*}
%
\item\label{6.20-4}
If $f\in\BLeb(\mathcal A)$
(and $\hat f\in\Cont{Y}\subseteq \BLeb(\clopen(Y))$\,), then
\begin{equation*}
\int \hat{f}\,\mathrm{d}\overline{\mu}\ =\ \int f\,\mathrm{d}\mu\htam{.}
\end{equation*}
For a proof,
first observe that this is just the definition of~$\overline \mu$
if $f=\mathbb{1}_A$, $A\in\mathcal A$;
the validity of the formula for~$f$ in~$\lbb\mathcal A\rbb$
is a direct consequence;
finally, we use uniform limits for arbitrary~$f$.
%
\item\label{6.20-5}
Out of $\mu\colon\mathcal A\ra \R$
we have made $\overline\mu\colon\clopen(Y)\ra\R$.
This seems a clear loss,
as~$\mathcal A$ is a $\sigma$-algebra
and $\clopen(Y)$
in all probability is not.
But now we have a topology at our disposal
and we have eliminated the null sets:
\statement{%
\begin{equation*}
\htam{If }\ U\in\clopen(Y)\ \htam{ and }\ 
\overline\mu(U)=0\htam{,\quad then }\ U=\varnothing\htam{.}
\end{equation*}}%
(This is obvious.)
%
\item\label{6.20-6}
As a consequence,
\emph{every disjoint collection of clopen subsets of~$Y$
is countable.}
(It contains at most $37\,\overline{\mu}(Y)$ elements~$U$
with $\overline \mu(U)>37^{-1}$.)
%
\item\label{6.20-7}
$\overline\mu$ has this additivity property:
\emph{If $U_1,U_2,\dotsc$ are pairwise disjoint
clopen sets and~$U$ is the closure of their union,
then
\begin{equation*}
\overline\mu(U)\ =\ \sum\,\overline\mu(U_n)\htam{.}
\end{equation*}}
Proof:
Choose $A_1,A_2,\dotsc$ in~$\mathcal A$
with $\hat{A}_n=U_n\quad(n\in\N)$.
Define $B_1,B_2,\dotsc\in\mathcal A$ by
\begin{alignat*}{4}
B_1\ :=&\ A_1\htam{, }&\qquad
B_n\ :=&\ A_n\backslash A_1\cup\dotsb\cup A_{n-1}& \quad &(n\geq 2)\htam{;} \\
\shortintertext{
then $B_1,B_2,\dotsc$ are mutually disjoint and}
\hat{B}_1\ =&\ \hat{A}_1\htam{, }&\qquad
\hat{B}_n\ =&\ \hat{A}_n\backslash \hat{A}_1 \cup\dotsb\cup\hat{A}_{n-1}&
  \quad&(n\geq 2)\htam{,}
\end{alignat*}
from which it follows that $\hat{B}_n=U_n$
for each~$n$.
With $B:=\bigcup B_n$
we have $\mathbb{1}_B=\sup_n \mathbb{1}_{B_n}$
in~$\BLeb(\mathcal A)$,
so $\hat{\mathbb{1}}_B=\sup_n \hat{\mathbb{1}}_{B_n}=\sup \mathbb{1}_{U_n}$
in~$\Cont{Y}$,
so that $\hat{B}=U$.
Now $\overline\mu(U)=\mu(B)
=\sum\mu(B_n)=\sum\overline\mu(U_n)$.
%
\item\label{6.20-8}
We will also deal with a finite measure~$\nu$ on~$\mathcal A$ satisfying
\begin{equation*}
\nu(A)\leq\mu(A)\qquad(A\in\mathcal A)\htam{.}
\end{equation*}

If $A,B\in\mathcal A$
and $\hat A=\hat B$,
then (see~\ref{6.20-3})
we have $\mu(A\backslash B)=\mu(B\backslash A)=0$,
and therefore $\nu(A\backslash B)= \nu(B\backslash A)=0$;
by the argument of~\ref{6.20-3}
this implies $\nu(A)=\nu(B)$.
Hence, the formula
\begin{equation*}
\overline\nu(\hat A)\ :=\ \nu(A)\qquad(A\in\mathcal A)
\end{equation*}
defines an (additive) function~$\overline\nu$ on $\clopen(Y)$ with
\begin{equation*}
\overline\nu(U)\ \leq\ \overline\mu(U)\qquad(U\in\clopen(U)\,)\htam{.}
\end{equation*}
%
\item\label{6.20-9}
$\overline\nu$ has the additivity property ascribed to~$\overline\mu$
in~\ref{6.20-7}.
(Observe that 
\begin{alignat*}{2}
\textstyle\overline\nu(U)-\sum_{n\geq N} \overline\nu(U_n)
\ &=\    \overline\nu\bigl(\,U\,\backslash
          \textstyle\bigcup_{n\leq N}U_n\,\bigr) \\
\ &\leq\ \overline\mu\bigl(\,U\,\backslash
          \textstyle \bigcup_{n\leq N}U_n\,\bigr)
\ =\     \overline\mu(U)-\sum_{n\leq N}\overline\mu(U_n)
\end{alignat*}
for every~$N$.)
\end{enumerate}
\end{psec}
%
%                  6.21
%

\begin{psec}{6.21}%
\noindent Now we prove a classical result from integration theory:

\vspace{.5em}
\noindent\textbf{Radon--Nikodym Theorem}\  
\statement{Let $\mu$ and~$\nu$ be finite measures
on a $\sigma$-algebra~$\mathcal A$ of subsets of a set~$X$,
such that
\begin{alignat*}{2}
\nu(A)\ &\leq\ \mu(A)\qquad(A\in\mathcal A)\htam{.} \\
\shortintertext{Then there is an~$f$ in $\BLeb(\mathcal A)^+$ with}
\nu(A)\ &=\int\mathbb{1}_A\, f\,\mathrm{d}\mu\qquad(A\in\mathcal A)\htam{.}
\end{alignat*}
}\end{psec}
\begin{proof}
With the aid of~\ref{6.20}
we see that it suffices to prove the following:
\vspace{.5em}
\begin{center}
\begin{minipage}{.8\textwidth}
Let $Y$ be an extremally disconnected compact Hausdorff space.
Let~$\overline\mu$ and~$\overline\nu$
be additive functions $\clopen(Y)\ra[0,\infty)$
such that $\overline\nu\leq\overline\mu$
and~$\overline\mu$ has the properties described
in~\ref{6.20-5}--\ref{6.20-7} of~\ref{6.20}.
Then there exists an~$f$ in~$\Cont{Y}^+$ with
\begin{equation*}
\overline\nu(A)\ =\int\mathbb{1}_A\,f\,\mathrm{d}\overline\mu
   \qquad (A\in\clopen(Y)\,)\htam{.}
\end{equation*}
\end{minipage}
\end{center}
\vspace{.5em}
This we proceed to do.
For convenience,
we write~``$\mu$'' and~``$\nu$''
instead of~``$\overline\mu$'' and~``$\overline\nu$'',
and~``$X$'' instead of~``$Y$''.
We look for an~$f$ in~$\Cont{X}^+$ with
\begin{equation*}
\nu(A)\ =\ \int\mathbb{1}_A\,f\,\mathrm{d}\mu
  \qquad (A\in\clopen(X)\,)\htam{.}
\end{equation*}
Define $\omega\colon\clopen(X)\ra[0,1]$ by:
\begin{equation*}
\omega(A)\ :=\inf_{\substack{B\htam{ clopen}\\B\subseteq A}}\  
\frac{\nu(B)}{\mu(B)}\htam{.}
\end{equation*}
Thanks to Dedekind completeness of~$X$
we can define an~$f$ in~$\Cont{X}$ by
\begin{equation*}
f\ :=\ \sup\,\bigl\{ \omega(A)\,\mathbb{1}_A\colon\ 
   A\htam{ clopen,} \ A\neq\varnothing\bigr\}
\quad\htam{(in }\Cont{X}\,\htam{).}
\end{equation*}
\begin{enumerate}[label=(\Roman*)]
\item\label{6.21-I}
Let $W\subseteq X$ be clopen,
$s\in\R$, and $f\leq s$ on~$W$.
Claim: $\nu(W)\leq s\,\mu(W)$.

\noindent\emph{Proof}\  Suppose not.
Choose a number~$t$ with
\begin{alignat*}{2}
s\ <\ t\ &<\ \textstyle \frac{\nu(W)}{\mu(W)}\htam{;}\\
\shortintertext{then}
t\,\mu(W)\ &<\ \nu(W)\htam{.}
\end{alignat*}
Let $\mathcal A$ be a maximal disjoint collection
of clopen subsets~$A$ of~$W$
with $\nu(A)\leq t\,\mu(A)$,
and let~$W_0$ be the closure of its union.
$W_0$ is a clopen subset of~$W$.
It follows from~\ref{6.20-6}, \ref{6.20-7}
and~\ref{6.20-9} of~\ref{6.20} that
$\nu(W_0)\leq t\,\mu(W_0)$,
so $W_0\neq W$.

By the maximality of the system~$\mathcal A$,
for every nonempty clopen $B\subseteq  W\backslash W_0$
we have $\nu(B)>t\,\mu(B)$,
which implies $\omega(W\backslash W_0)\geq t > s\geq f(x)$
for all~$x$ in~$W$.
But $f(x)\geq \omega(W\backslash W_0)$
if $x\in W\backslash W_0$.
Contradiction.
%
\item\label{6.21-II}
Let $W\subseteq X$ be clopen,
$s\in\R$, and $f\geq s$ on~$W$.
Claim: $\nu(W)\geq s\,\mu(W)$.

\noindent\emph{Proof}\  Suppose not.
Choose a number~$t$ with
\begin{equation*}
s\ >\ t\ >\ {\textstyle \frac{\nu(W)}{\mu(W)}}\htam{.}
\end{equation*}
Let $\mathcal A$ be a maximal disjoint collection of
clopen subsets~$A$ of~$W$ with $\nu(A)\geq t\,\mu(A)$,
and let~$W_0$ be the closure of its union.
As before,
$W_0\neq W$.
With~$\varepsilon:=s-t$ we have
$f-\varepsilon\,\mathbb{1}_{W\backslash W_0} <f$,
so that by the definition of~$f$,
there exist an~$a$ in~$X$
and a nonempty clopen set~$A$ with
\begin{equation*}
f(a)-\varepsilon\,\mathbb{1}_{W\backslash W_0}(a)
\ <\ \omega(A)\,\mathbb{1}_A (a)\htam{.}
\end{equation*}
As $f\geq\omega(A)\,\mathbb{1}_A$,
we see from this that $a\in W\backslash W_0$;
then $f(a)\geq s$, and:
\begin{equation*}
t\ =\ s-\varepsilon\ <\ \omega(A)\,\mathbb{1}_A(a)\htam{.}
\end{equation*}
Hence, $a\in A$ and $\omega(A)>t$.
Setting $B:=A\cap(W\backslash W_0)$
we observe that $B\neq\varnothing$ (as~$a\in B$)
and $t<\omega(A)<\smash{\frac{\nu(B)}{\mu(B)}}$,
contradicting the maximality of~$\mathcal A$.

\item\label{6.21-III}
Now let $A\in\clopen(X)$, $N\in\N$;
we show that
\begin{equation*}
\bigl|\textstyle  \nu(A)-\int\mathbb{1}_A\,f\,\mathrm{d}\mu\bigr|
\ \leq\ N^{-1}\mu(A)\htam{.}
\end{equation*}
(This proves the theorem.)

Define
\begin{alignat*}{2}
V_0 &:= \varnothing\htam{,}\quad
V_N:=A\htam{,} \\
V_n &:= \bigl\{x\in A\colon f(x)<{\textstyle\frac{n}{N}}\bigl\}
    &\qquad&(n=1,\dotsc,N-1)\htam{,} \\
W_n &:= \overline{V}_n\backslash\overline{V}_{n-1}
 &\qquad&(n=1,\dotsc,N)\htam{.}
\end{alignat*}
(The bar indicates closure.)
The sets $W_1,\dotsc,W_N$ are clopen,
pairwise disjoint;
they cover~$A$,
and $\smash{\frac{n-1}{N}\leq f\leq \frac{n}{N}}$
on~$W_n\quad(n=1,\dotsc,N)$.
From~\ref{6.21-I} and~\ref{6.21-II} we obtain,
for each~$n$,
\begin{alignat*}{2}
\nu(W_n)\ &\leq\ &\textstyle\frac{n}{N}\ \,\mu(W_n)
  \ &\leq\ \int\mathbb{1}_{W_n}\,f\,\mathrm{d}\mu 
  \ +\  N^{-1}\,\mu(W_n)\htam{,} \\
\nu(W_n)\ &\geq\ &\textstyle\frac{n-1}{N}\,\mu(W_n)
  \ &\geq\ \int\mathbb{1}_{W_n}\,f\,\mathrm{d}\mu 
  \ -\  N^{-1}\,\mu(W_n)\htam{.} 
\end{alignat*}
Addition produces the desired inequality. \xqed
\end{enumerate}
\end{proof}
%
%
%
\clearpage
\end{document}
